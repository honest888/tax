<!--头部css位置s-->
{include file='public:header-css'/}
<!--头部css位置e-->
<body class="bg-fff1">
<script src="__MOBILE__/js/swiper.min.js"></script>
<script src="__STATIC__/plugin/layui/layui.js"></script>
<!--头部导航位置s-->
<header class="header bg-fff">
  <a class="back iconfont iconback"></a>
  <div class="title">视频列表</div>
</header>
<!--头部导航位置e-->
<div style="height: 45px"></div>
<!--内容s-->
<div class="shop">
  <div class="cate shop-index-swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide act" data-id="0">全部</div>
      {volist name="$cate_list" id="cate"}
      <div class="swiper-slide" data-id="{$cate.id}">{$cate.name}</div>
      {/volist}
    </div>
  </div>
</div>
<!--内容e-->
<!--商品列表s-->
<div class="video-list mto10">
  <div class="video-list-container"></div>
</div>
<!--商品列表e-->
</body>
<style>
  .swiper{
    padding: 10px;
  }
  .swiper .swiper-container img{
      border-radius: 5px;
  }
</style>
<script>
  var id=0;
    $(function () {
      get_more();
      $(document).on('click','.play',function (){
        var obj=$(this).next('video');
        obj.trigger('click');
      })
      $(document).on('click','.video',function (){
        var did=$(this).attr('data-id');
        var obj=$(this).prev('.play');
        var isHidden=obj.is(':hidden');
        if (did==id){
          if (isHidden){
            obj.show();
            $(this).trigger('pause');
          }else {
            obj.hide();
            $(this).trigger('play');
          }
        }else {
          obj.hide();
          $('.play[data-id='+id+']').show();
          $('#video'+id).trigger('pause');
          $(this).trigger('play');
          id=did;
        }
      })
    });
    function get_more() {
      var cate_id=$('.shop-index-swiper .swiper-wrapper .act').attr('data-id');
      public_ajax('.video-list-container',"{:url('Content/ajax_video_list')}",'&cate_id='+cate_id,'暂无相关数据');
    }
    var swiper = new Swiper('.shop-index-swiper', {
      slidesPerView:'auto',
      freeMode: true,
      on:{
        tap:function () {
          var item=$('.shop-index-swiper .swiper-slide').eq(this.clickedIndex);
          if (item.hasClass('act'))return;
          $('.shop-index-swiper .act').removeClass('act');
          item.addClass('act');
          swiper.slideTo(this.clickedIndex);
          $('.video-list-container').empty();
          get_more();
        }
      }
    });
</script>
</html>